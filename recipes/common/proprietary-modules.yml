# Copyright 2025 The Secureblue Authors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software distributed under the License is
# distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and limitations under the License.

modules:
    - type: script
      scripts:
        - ensurenegativopresence.sh
    - type: dnf
      install:
        install-weak-deps: false
        packages:
          - libopenjph
          - heif-pixbuf-loader
          - ffmpegthumbnailer
          - rar
          # - pipewire-libs-extra uncomment once this ships https://bodhi.fedoraproject.org/updates/FEDORA-2025-1299cfef2f
      replace:  
        - from-repo: fedora-multimedia
          packages:
            - libheif
            - libva
            - mesa-dri-drivers
            - gstreamer1-plugin-libav
            - mesa-filesystem
            - mesa-libEGL
            - mesa-libGL
            - mesa-libgbm
            - mesa-va-drivers
            - mesa-vulkan-drivers
            - libva-intel-media-driver
            - intel-gmmlib
            - intel-mediasdk
            - old: ffmpeg-free
              new: ffmpeg
            - old: fdk-aac-free
              new: libfdk-aac
            - old: gstreamer1-plugins-ugly-free
              new: gstreamer1-plugins-ugly
            - old: libavcodec-free
              new: libavcodec
            - old: libavdevice-free
              new: libavdevice
            - old: libavfilter-free
              new: libavfilter
            - old: libavformat-free
              new: libavformat
            - old: libavutil-free
              new: libavutil
            - old: libpostproc-free
              new: libpostproc
            - old: libswresample-free
              new: libswresample
            - old: libswscale-free
              new: libswscale

    - type: script
      scripts:
        - removeunusedrepos.sh