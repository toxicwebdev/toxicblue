modules:
    - type: containerfile
      snippets:
        - COPY --from=ghcr.io/ublue-os/akmods:main-43 /rpms /tmp/rpms
        - COPY --from=ghcr.io/ublue-os/akmods:main-43 /kernel-rpms /tmp/rpms/kernel
        - RUN find /tmp/rpms
        - RUN rpm -q ublue-os-akmods-addons || dnf install -y /tmp/rpms/ublue-os/ublue-os-akmods-addons*.rpm
    - type: script
      scripts:
        - installsignedkernel.sh

    - type: dnf
      install:
        install-weak-deps: false
        packages:
          - just
          - powerstat

    - type: dnf
      repos:
        files:
          - https://copr.fedorainfracloud.org/coprs/ublue-os/packages/repo/fedora-%OS_VERSION%/ublue-os-packages-fedora-%OS_VERSION%.repo
      install:
        install-weak-deps: false
        packages:
          - ublue-os-udev-rules
          - ublue-os-update-services
          - ublue-os-signing
          - ublue-os-luks
          - ublue-os-just

    - type: script
      scripts:
        - installandroidudev.sh
        - ensureautoupdates.sh
        - addimageinfo.sh

    - type: dnf
      install:
        install-weak-deps: false
        packages:
        # launcher
          - rofi-wayland
          - wofi

        # environment
          - bolt
          - dbus-daemon
          - dbus-tools
          - ddcutil
          - distrobox
          - fprintd-pam
          - fzf
          - git
          - gnome-disk-utility
          - gnome-keyring
          - gnome-keyring-pam
          - haveged
          - headsetcontrol
          - ksshaskpass
          - langpacks-ru
          - lm_sensors
          - lzip
          - mate-polkit
          - mediainfo 
          - openrgb-udev-rules
          - openssl
          - pass
          - pass-otp
          - pinentry-gnome3
          - playerctl
          - powertop
          - qt5ct
          - qt6ct
          - qt6-qtwayland
          - sane-frontends
          - solaar-udev
          - steam-devices
          - system-config-printer
          - tpm2-pkcs11
          - tpm2-pkcs11-tools
          - tuned-ppd
          - tuned-switcher
          - unrar-free
          - vim
          - vulkan-tools
          - vulkan-validation-layers
          - w3m
          - wayland-utils
          - xdg-user-dirs
          - xlsclients
          - yad
          - zsh
          - zsh-autosuggestions
          - zsh-syntax-highlighting
          - zstd
          
        # sound
          - alsa-firmware
          - alsa-plugins-pulseaudio
          - pamixer
          - pavucontrol

        # networking
          - blueman
          - bluez-tools
          - firewall-config
          - network-manager-applet
          - NetworkManager-openconnect
          - NetworkManager-openconnect-gnome
          - NetworkManager-openvpn
          - NetworkManager-openvpn-gnome
          - nm-connection-editor

        # file manager
          - android-tools
          - gtkhash-thunar
          - gvfs-archive
          - gvfs-fuse
          - gvfs-gphoto2
          - gvfs-mtp
          - gvfs-nfs
          - gvfs-smb
          - imv
          - p7zip
          - thunar
          - thunar-archive-plugin 
          - thunar-volman
          - xarchiver

        # screenshot
          - grim
          - slurp

        # display
          - brightnessctl
          - kanshi
          - light
          - wlr-randr
          - wlsunset

        # notifications
          - dunst

        # theme and GUI
          - fontawesome-fonts
          - gnome-themes-extra
          - papirus-icon-theme
      replace:
        - from-repo: fedora
          packages:
            - old: OpenCL-ICD-Loader
              new: ocl-icd

    - from-file: common/proprietary-modules.yml

    - type: script
      scripts:
        - removeunusedrepos.sh

    - type: files
      files:
        - source: system/usr
          destination: /usr
        - source: system/etc
          destination: /etc

    - type: gschema-overrides
      include:
        - zz1-toxicblue-theming.gschema.override

    - type: toxicblue-signing
      source: local
